(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[167],{198:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/create",function(){return s(9986)}])},9986:function(e,t,s){"use strict";s.r(t);var i=s(5893),o=s(7294),n=s(7536),l=s(1163),r=s(254),a=s(1664),c=s.n(a),d=s(4712);t.default=()=>{var e,t,s;let a=(0,l.useRouter)(),[m,p]=(0,o.useState)(new Date),[x,u]=(0,o.useState)([]),h=(0,o.useContext)(r.S),{register:f,formState:{errors:y},handleSubmit:j,setValue:b}=(0,n.cI)({defaultValues:{created_at:new Date,post_title:"",category:1,post_description:"",created_by:0}}),g="http://13.51.34.110",v=async e=>{let t=m.toISOString(),s=new FormData;s.append("post_title",e.post_title),s.append("post_description",e.post_description),s.append("category",parseInt(e.category)),s.append("created_by",h.user.id),s.append("created_at",t);let i=await fetch("".concat(g,"/api/post-create/"),{method:"POST",headers:{Authorization:"Token ".concat(h.token)},body:s});return await i.json()?(a.push("/"),!0):(d.A.error("There are some errors to insert the record."),!1)},_=async()=>{let e=await fetch("".concat(g,"/api/category-list/"));u(await e.json())};return(0,o.useEffect)(()=>{_()},[]),console.log(h),(0,i.jsx)(i.Fragment,{children:void 0!=h?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("form",{className:"flex flex-col",onSubmit:j(v),children:[(0,i.jsx)("h1",{className:"font-semibold text-md flex justify-center items-center mt-5 mb-5 md:text-xl",children:"Post Create"}),(0,i.jsx)("span",{className:"font-semibold px-2 py-2 md:px-0 md:my-0",children:"Post Tile"}),(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsx)("input",{type:"text",autoComplete:"post_title",className:"px-2 py-2 ml-2 md:ml-0 outline-none border w-80 md:w-96",placeholder:"enter post title",...f("post_title",{required:!0})})}),(0,i.jsx)("div",{className:"text-rose-400",children:(null===(e=y.post_title)||void 0===e?void 0:e.type)==="required"&&"Post title is required"}),(0,i.jsxs)("div",{className:"flex flex-col mt-6",children:[(0,i.jsx)("span",{className:"font-semibold px-2 py-2 md:px-0 md:my-0",children:"Category"}),(0,i.jsx)("div",{className:"ml-2 md:ml-0",children:(0,i.jsxs)("select",{className:"px-2 py-2 outline-none border w-80 md:w-96",...f("category",{required:"Category is required."}),children:[(0,i.jsx)("option",{value:"",children:"Select..."}),void 0!==x&&x.map(e=>(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("option",{value:e.category_id,children:e.category_name})}))]})}),(0,i.jsx)("div",{className:"text-rose-400",children:null===(t=y.category)||void 0===t?void 0:t.message})]}),(0,i.jsxs)("div",{className:"flex flex-col mt-6",children:[(0,i.jsx)("span",{className:"px-2 py-2 font-semibold md:px-0 md:my-0",children:"Post Content"}),(0,i.jsx)("div",{className:"ml-2 md:ml-0",children:(0,i.jsx)("textarea",{rows:10,className:"px-2 py-2 outline-none border w-80 md:w-[600px]",...f("post_description",{required:!0})})}),(0,i.jsx)("div",{className:"text-rose-400",children:(null===(s=y.post_description)||void 0===s?void 0:s.type)==="required"&&"Post content is required"})]}),(0,i.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-x-4",children:[(0,i.jsx)("button",{type:"button",onClick:()=>{a.push("/")},className:"text-sm font-semibold leading-6 text-gray-900  mb-4",children:"Cancel"}),(0,i.jsx)("button",{onClick:j(v),type:"button",className:"rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold  text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2  focus-visible:outline-offset-2 focus-visible:outline-indigo-600  mb-4",children:"Save"})]})]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"flex items-center justify-center h-screen bg-white",children:[(0,i.jsx)("span",{className:"font-semibold text-xl",children:"You are not logged in."}),(0,i.jsx)("div",{className:"font-semibold text-2xl text-blue-800 pl-6 cursor-pointer hover:text-cyan-800",children:(0,i.jsx)(c(),{href:"/login",children:"Login"})})]})})})}}},function(e){e.O(0,[536,774,888,179],function(){return e(e.s=198)}),_N_E=e.O()}]);