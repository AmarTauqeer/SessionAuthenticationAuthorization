(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3454:function(e,t,r){"use strict";var s,i;e.exports=(null==(s=r.g.process)?void 0:s.env)&&"object"==typeof(null==(i=r.g.process)?void 0:i.env)?r.g.process:r(7663)},5557:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(883)}])},916:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var s=r(5893),i=r(7294),n=r(1163),a=e=>{let{categories:t}=e,r=(0,n.useRouter)(),i=e=>{r.push({pathname:"/",query:{category_id:e}})};return(0,s.jsxs)("div",{className:"flex flex-col w-80 md:w-full bg-red-500 rounded-2xl",children:[(0,s.jsx)("div",{className:"text-xl font-semibold text-center m-4 text-white",children:"Categories"}),t.length>0&&t.map(e=>(0,s.jsx)("div",{className:"flex items-center bg-white shadow-xl border border-solid p-3 hover:bg-red-500 hover:text-white",onClick:()=>i(e.category_id),children:(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>i(e.category_id),children:e.category_name})},e.category_id)),(0,s.jsx)("div",{className:"cursor-pointer bg-white shadow-xl border border-solid p-3 hover:bg-red-500 hover:text-white",onClick:()=>{r.push("/")},children:"All"})]})},c=e=>{let[t,r]=(0,i.useState)([]),n=async()=>{let e=await fetch("".concat("http://13.51.34.110","/api/category-list/"));r(await e.json())};return(0,i.useEffect)(()=>{n()},[e]),(0,s.jsx)(a,{categories:t})}},160:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var s=r(5893),i=r(7294),n=r(381),a=r.n(n),c=r(7536),o=r(1163),l=r(4712),d=r(8633),u=r(80),p=e=>{var t;let{comment_id:r,userInfo:n}=e,o="http://13.51.34.110",[p,m]=(0,i.useState)([]),[f,h]=(0,i.useState)(new Date),{register:x,formState:{errors:y},handleSubmit:w,setValue:_}=(0,c.cI)({defaultValues:{created_at:new Date,reply_text:"",comment:0,created_by:0}}),j=async()=>{let e=await fetch("".concat(o,"/api/users/"),{method:"GET",headers:{"Content-Type":"json/application"}});return await e.json()};(0,i.useEffect)(()=>{void 0!=r&&(async e=>{let t=[],r=await fetch("".concat(o,"/api/reply-list/")),s=await r.json();if(s.length>0){let r=s.filter(t=>t.comment==e);for(let e=0;e<r.length;e++){let s=r[e],i="",n=[];(n=await j()).length>0&&(i=await n.filter(e=>{if(e.id==s.created_by)return e.first_name}));let a={reply_id:s.reply_id,reply_text:s.reply_text,created_at:s.created_at,created_by:i[0].first_name,like:s.like};t.push(a)}t.length>0&&m(t)}else m([])})(r)},[r]);let v=async(e,t)=>{t.preventDefault();let s=f.toISOString(),i=new FormData;i.append("reply_text",e.reply_text),i.append("comment",parseInt(r)),i.append("created_by",parseInt(n.user.id)),i.append("created_at",s);let a=await fetch("".concat(o,"/api/reply-create/"),{method:"POST",headers:{Authorization:"Token ".concat(n.token)},body:i}),c=await a.json();return"You don't have permission for this action"!=c?(l.A.success("Reply has been added."),_("reply_text",""),await fetchReplies(r),!0):(l.A.error(c),!1)},g=async e=>{if(200!=(await fetch("".concat(o,"/api/reply-delete/").concat(e),{method:"DELETE",headers:{AUTHORIZATION:"Token ".concat(n.token)}})).status)return l.A.error("There are issues to delete the record."),!1;l.A.success("Record has been deleted successfully."),await fetchReplies(r)};return(0,s.jsxs)("div",{className:"flex flex-col w-64 md:w-full px-4 ",children:[void 0!=n&&(0,s.jsx)("div",{children:(0,s.jsxs)("form",{children:[(0,s.jsxs)("div",{className:"flex justify-between lg:flex-row bg-gray-100 rounded-xl w-64 md:w-[500px]",children:[(0,s.jsx)("input",{type:"text",autoComplete:"reply_text",className:"px-2 py-2 outline-none bg-gray-100 rounded-xl flex w-[450px]",placeholder:"write your reply",...x("reply_text",{required:!0})}),(0,s.jsx)("button",{onClick:w(v),type:"button",className:"py-1 mr-2 cursor-pointer",children:(0,s.jsx)(d.lNF,{size:22})})]}),(0,s.jsx)("div",{className:"text-rose-400",children:(null===(t=y.reply_text)||void 0===t?void 0:t.type)==="required"&&"Reply is required"})]})}),p.length>0&&p.map((e,t)=>(0,s.jsx)("div",{className:"flex justify-start w-full items-center",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center px-4",children:[(0,s.jsx)("div",{className:"mr-6",children:e.created_by}),(0,s.jsx)("div",{children:a()(e.created_at).format("MMM DD, YYYY")}),(0,s.jsx)("div",{className:"ml-6",children:e.reply_text}),(0,s.jsx)("div",{className:"px-1 py-1 cursor-pointer text-rose-400",children:(0,s.jsx)(u.F1H,{onClick:()=>g(e.reply_id),size:22})})]})},t))]})},m=r(5451),f=e=>{var t;let{userInfo:r,post:n}=e;(0,o.useRouter)();let d="http://13.51.34.110",[f,h]=(0,i.useState)(new Date),[x,y]=(0,i.useState)([]),{register:w,formState:{errors:_},handleSubmit:j,setValue:v}=(0,c.cI)({defaultValues:{created_at:new Date,comment_text:"",post:0,created_by:0}}),g=async e=>{let t=[],r=await fetch("".concat(d,"/api/comment-list/")),s=await r.json();if(s.length>0){let r=s.filter(t=>t.post==e);for(let e=0;e<r.length;e++){let s=r[e],i="",n=[];(n=await b()).length>0&&(i=await n.filter(e=>{if(e.id==s.created_by)return e.first_name}));let a={comment_id:s.comment_id,comment_text:s.comment_text,created_at:s.created_at,created_by:i[0].first_name,post:s.post,like:s.like};t.push(a)}t.length>0&&y(t)}else y([])},b=async()=>{let e=await fetch("".concat(d,"/api/users/"),{method:"GET",headers:{"Content-Type":"json/application"}}),t=await e.json();return await t},N=async(e,t)=>{t.preventDefault();let s=f.toISOString(),i=new FormData;i.append("comment_text",e.comment_text),i.append("post",parseInt(n)),i.append("created_by",parseInt(r.user.id)),i.append("created_at",s);let a=await fetch("".concat(d,"/api/comment-create/"),{method:"POST",headers:{Authorization:"Token ".concat(r.token)},body:i}),c=await a.json();return(console.log(c),"You don't have permission for this action"!=c)?(l.A.success("Comment has been added."),v("comment_text",""),await g(n),!0):(l.A.error(c),!1)},T=async e=>{if(200!=(await fetch("".concat(d,"/api/comment-delete/").concat(e),{method:"DELETE",headers:{AUTHORIZATION:"Token ".concat(r.token)}})).status)return l.A.error("You don't have permission for this action"),!1;l.A.success("Record has been deleted successfully."),await g(n)};return(0,i.useEffect)(()=>{void 0!=n&&g(n)},[n]),(0,s.jsxs)("div",{className:"flex flex-col w-[290px] md:w-full ",children:[void 0!=r&&(0,s.jsx)("div",{children:(0,s.jsxs)("form",{children:[(0,s.jsxs)("div",{className:"flex justify-between lg:flex-row bg-gray-100 rounded-xl w-64 md:w-[500px]",children:[(0,s.jsx)("input",{type:"text",autoComplete:"comment_text",className:"px-2 py-2 outline-none bg-gray-100 rounded-xl flex w-[450px]",placeholder:"write your comment",...w("comment_text",{required:!0})}),(0,s.jsx)("button",{onClick:j(N),type:"button",className:"py-1 mr-2 cursor-pointer",children:(0,s.jsx)(m.XnA,{size:22})})]}),(0,s.jsx)("div",{className:"text-rose-400",children:(null===(t=_.comment_text)||void 0===t?void 0:t.type)==="required"&&"Comment is required"})]})}),x.length>0&&x.map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"flex justify-start w-full items-center",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-center items-center px-4",children:[(0,s.jsx)("div",{className:"mr-6",children:e.created_by}),(0,s.jsx)("div",{children:a()(e.created_at).format("MMM DD, YYYY")}),(0,s.jsx)("div",{className:"ml-6",children:e.comment_text}),(0,s.jsx)("div",{className:"px-1 py-1 cursor-pointer text-rose-400",children:(0,s.jsx)("button",{children:(0,s.jsx)(u.F1H,{onClick:()=>T(e.comment_id),size:22})})})]})}),(0,s.jsx)("div",{className:"w-full md:px-4 py-1",children:(0,s.jsx)(p,{comment_id:e.comment_id,userInfo:r})})]}))]})},h=e=>(0,s.jsx)("div",{children:(0,s.jsx)(f,{userInfo:e.userInfo,post:e.post_id})})},883:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var s=r(5893),i=r(381),n=r.n(i),a=r(1664),c=r.n(a),o=r(7294),l=r(6977),d=r(80),u=r(6204),p=r(160),m=r(4712),f=r(1163),h=r(3454),x=e=>{let{posts:t,user:r}=e,i="http://13.51.34.110",[a,x]=(0,o.useState)(!1),[y,w]=(0,o.useState)(!1),_=(0,f.useRouter)(),j=async e=>{_.push("/post/".concat(e))},v=async e=>{if(200!=(await fetch("".concat(i,"/api/post-delete/").concat(e),{method:"DELETE",headers:{AUTHORIZATION:"Token ".concat(r.token)}})).status)return m.A.error("There are issues to delete the record."),!1;m.A.success("Record has been deleted successfully."),_.push("/")},g=async e=>{let t=await fetch("".concat(i,"/api/post-update/"),{method:"PATCH",headers:{"Content-Type":"application/json",AUTHORIZATION:"Token ".concat(r.token)},body:JSON.stringify({post_id:e,like:!y})});await t.json()&&(w(!y),_.push("/"))};return h.env.NEXT_PUBLIC_FOLDER_PATH,(0,s.jsx)(s.Fragment,{children:t.length>0&&t.map(e=>(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex flex-col w-80  md:w-full lg:w-full justify-center items-center mb-4 py-4 bg-white rounded-lg shadow-2xl",children:[(0,s.jsx)("div",{className:"transition duration-100 text-center mb-8 cursor-pointer hover:text-pink-600  text-3xl font-semibold mt-6",children:(0,s.jsx)(c(),{href:"/post/".concat(e.id),children:e.post_title})}),(0,s.jsx)("div",{className:"flex justify-start w-full items-center mb-2 p-2",children:(0,s.jsx)("span",{className:"text-justify",children:e.post_description})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-start w-full items-center mb-2 mt-1 px-2",children:[(0,s.jsxs)("div",{className:"flex items-center w-full",children:[(0,s.jsx)("div",{className:"mr-6",children:e.created_by}),(0,s.jsx)("div",{children:n()(e.created_at).format("MMM DD, YYYY")})]}),void 0!=r&&(0,s.jsxs)("div",{className:"flex justify-center md:justify-end items-center w-full",children:[(0,s.jsx)("div",{className:"mt-4 px-2 py-1 cursor-pointer",children:(0,s.jsx)(l.qPX,{size:25,onClick:()=>g(e.id),style:{color:e.like?"blue":"gray"}})}),(0,s.jsx)("div",{className:"mt-4 px-2 py-1 cursor-pointer",children:(0,s.jsx)(u.ZvA,{size:25,onClick:()=>x(!a)})}),(0,s.jsx)("div",{className:"mt-4 px-2 py-1 cursor-pointer text-yellow-500",children:(0,s.jsx)(d.oTc,{size:30,onClick:()=>j(e.id)})}),(0,s.jsx)("div",{className:"mt-4 text-red-500 px-1 py-1 cursor-pointer",children:(0,s.jsx)(d.F1H,{onClick:()=>v(e.id),size:30})})]})]}),a&&(0,s.jsx)("div",{className:"w-full p-4 md:px-4 md:py-4",children:(0,s.jsx)(p.default,{post_id:e.id,userInfo:r})})]})}))})},y=r(254),w=r(916),_=e=>{let{posts:t}=e,r=(0,f.useRouter)(),i=e=>{r.push({pathname:"/",query:{post_id:e}})};return(0,s.jsxs)("div",{className:"flex flex-col w-80 md:w-full bg-red-500 rounded-2xl mt-4",children:[(0,s.jsx)("div",{className:"text-xl font-semibold text-center m-4 text-white",children:"Latest Posts"}),t.length>0&&t.map(e=>(0,s.jsx)("div",{className:"flex items-center bg-white shadow-xl border border-solid p-3 hover:bg-red-500 hover:text-white",onClick:()=>i(e.id),children:(0,s.jsx)("div",{className:"cursor-pointer",onClick:()=>i(e.id),children:e.post_title})},e.id))]})},j=e=>{let t="http://13.51.34.110",[r,i]=(0,o.useState)(),[n,a]=(0,o.useState)([]),c=(0,o.useContext)(y.S),l=(0,f.useRouter)(),d=async(e,r)=>{let s=[],i=[];s=0==e&&0==r?await fetch("".concat(t,"/api/post-list/")):r>0&&0==e?await fetch("".concat(t,"/api/post/").concat(r)):await fetch("".concat(t,"/api/post-list/category/").concat(e));let n=await s.json();if(Array.isArray(n)){for(let e=0;e<n.length;e++){let t=n[e],r="",s=[];if((s=await u()).length>0&&(r=await s.filter(e=>{if(e.id==t.created_by)return e.first_name})),r.length>0){let e={id:t.post_id,category:t.category,post_title:t.post_title,post_description:t.post_description,created_at:t.created_at,created_by:r[0].first_name,like:t.like};i.push(e)}}a(i)}else{let e=[];e=await u();let t="";if(e.length>0&&(t=await e.filter(e=>{if(e.id==n.created_by)return e.first_name})),t.length>0){let e={id:n.post_id,category:n.category,post_title:n.post_title,post_description:n.post_description,created_at:n.created_at,created_by:t[0].first_name,like:n.like};i.push(e),a(i)}}},u=async()=>{let e=await fetch("".concat(t,"/api/users/"),{method:"GET",headers:{"Content-Type":"json/application"}});return await e.json()};return(0,o.useEffect)(()=>{let e=0,t=0;l.query&&(l.query.category_id&&(e=l.query.category_id),l.query.post_id&&(t=l.query.post_id)),e>0&&0==t?d(e,0):t>0&&0==e?d(0,t):d(0,0)},[c,l.query]),(0,s.jsx)(y.S.Provider,{value:r,children:(0,s.jsx)("div",{className:"flex justify-center items-center md:w-[1240px] lg:w-[1240px]",children:(0,s.jsxs)("div",{className:"grid md:grid-cols-7 lg:grid-cols-7 gap-2 w-full m-2 ",children:[(0,s.jsxs)("div",{className:"flex flex-col col-span-2 rounded-2xl mb-3",children:[(0,s.jsx)("div",{children:(0,s.jsx)(w.default,{})}),(0,s.jsx)("div",{children:(0,s.jsx)(_,{posts:n})})]}),(0,s.jsx)("div",{className:"flex flex-col col-span-5",children:(0,s.jsx)(x,{posts:n,user:c})})]})})})}},7663:function(e){!function(){var t={229:function(e){var t,r,s,i=e.exports={};function n(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var o=[],l=!1,d=-1;function u(){l&&s&&(l=!1,s.length?o=s.concat(o):d=-1,o.length&&p())}function p(){if(!l){var e=c(u);l=!0;for(var t=o.length;t;){for(s=o,o=[];++d<t;)s&&s[d].run();d=-1,t=o.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new m(e,t)),1!==o.length||l||c(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},r={};function s(e){var i=r[e];if(void 0!==i)return i.exports;var n=r[e]={exports:{}},a=!0;try{t[e](n,n.exports,s),a=!1}finally{a&&delete r[e]}return n.exports}s.ab="//";var i=s(229);e.exports=i}()}},function(e){e.O(0,[838,738,845,885,698,396,536,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);